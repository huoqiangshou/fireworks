= 自学 Java 系列实验
:toc:
:toc-title: 目录
:toclevels: 1
:sectnumlevels: 4

ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

****
该实验还处于草创阶段，还有很多地方需要细化，有好的意见和建议、靠谱资料等等，欢迎发 PR 过来。
****

在 xref:plan.adoc[大学计算机学习攻略^] 整个课程中，只是零零散散的资料，不是很系统。所以，设计了这个系列整体：从零开始实现一个功能完备的商场。

== 友情支持

如果您觉得这个笔记对您有所帮助，看在D瓜哥码字的辛苦上，请友情支持一下，D瓜哥感激不尽，😜

[cols="2*^",frame=none]
|===
| image:images/alipay.png[title="支付宝", alt="支付宝", width="45%"] | image:images/wxpay.png[title="微信", alt="微信", width="45%"]
|===

有些打赏的朋友希望可以加个好友，欢迎关注D瓜哥的微信公众号，这样就可以通过公众号的回复直接给我发信息。

image:images/wx-jike-log.png[align="center",width=90%]

TIP: **公众号的微信号是: jike-log**。__因为众所周知的原因，有时图片加载不出来。如果图片加载不出来可以直接通过搜索微信号来查找我的公众号。__

:sectnums:



== 静态页面的商城

做静态页面，需要学习 HTML + CSS + JavaScript。

== 基于 JSP + Servlet 实现的商城

=== 要求

. 请使用纯原生 JSP & Servlet 来实现。不准使用任何框架。
. 请将代码开源到 GitHub 上。
. 初次开发，不需要遵循最佳实践，不需要考虑编码规范，先把东西做出来。

=== 问题分析

在上一步中，制作了一个静态页面。但是，不能添加商品，不能购物的网站，不能称为一个电子商城。所以，请使用 JSP & Servlet 将其改造成一个动态网址。

学习 Java，JSP & Servlet 等相关知识。需要基于前面的项目来慢慢改造。



== 基于 TinyMVC + FreeMarker 实现的商城

基于上面的项目，自己实现一个 MVC 框架：TinyMVC。

=== 要求

. 将代码开源到 GitHub 上。
. 将 TinyMVC 抽取出来，做个一个独立的小项目，可以在其他项目中复用。

=== 问题分析

在完成上述动态网址后，请思考如下问题：

. 业务逻辑（比如商品详情页显示）如何复用？
. JSP 只是一种比较慢的模板技术。如何在复用业务代码的基础上，快速替换一个更高效的模板技术（比如： https://freemarker.apache.org/[FreeMarker^]）？

在思考完上面两个问题后，可以了解一下 MVC 设计模式。

另外，开发框架需要重点考虑这个问题：怎么加载未来的类？说的更通俗易懂些，就是如何加载使用这个框架的业务代码。这里就需要学习反射、注解、类加载等知识。



== 基于 TinyMap 实现的商城

基于上面的项目，自己实现一个 O/R Mapping 框架：TinyMap。

=== 要求

. 将代码开源到 GitHub 上
. 将 TinyMap 抽取出来，做成一个独立的小项目，可以在其他项目中复用。

=== 问题分析

在开发上述商城代码时，有没有一种体会：一个数据库查询是非常标准的五步①建立连接；②创建 `Statement`；③执行查询；④处理查询结果；⑤关闭连接。其中，只需要重点关注 ③执行查询 和 ④处理查询结果 即可；另外三步都是重复操作。请问，怎么复用这些代码？

进一步分析，在 Java 中都是以操作对象为主，但是数据库确实一条一条记录。怎么解决这个映射关系？



[#tiny-pool]
== 基于 TinyPool 实现的商城

数据库连接的建立和释放是一个非常耗时工作。基于上面的项目，自己实现一个数据库连接池框架：TinyPool，实现数据库连接的复用。

=== 要求

. 将代码开源到 GitHub 上
. 将 TinyPool 抽取出来，做成一个独立的小项目，可以在其他项目中复用。



== 基于 TinySpring 实现的商城

基于上面的项目，自己实现一个 IOC + AOP 框架： TinySpring。

=== 要求

. 将代码开源到 GitHub 上
. 将 TinySpring。 抽取出来，做成一个独立的小项目，可以在其他项目中复用。

=== 问题分析

如果按照上面的顺序，逐步实现一个完整的项目。到这里为止，是一个比较大的项目了。各种对象依赖相互设置，是不是非常繁琐？怎么解决这个问题？

在 <<tiny-pool>> 中提到“数据库连接的建立和释放是一个非常耗时工作。”，如何进行定量分析？如果还想分析其他方法的耗时情况，怎么复用上面的解决方案？

怎么分析没有实现任何接口的类的调用情况？



== 基于 TinyDubbo 实现的分布式商城

基于上面的项目，自己实现一个分布式服务框架： TinyDubbo。

=== 要求

. 将代码开源到 GitHub 上
. 将 TinyDubbo。 抽取出来，做成一个独立的小项目，可以在其他地方复用。

=== 问题分析

如果访问量很大，一台服务器已经无法支撑负载了，怎么办？

两台三台机器好吧，十台八台，成百上千台怎么办？

如何发现哪些机器提供了服务？如何做负载均衡？如何方便地水平扩容和缩容？



== 基于 TinySharding 实现的分库分表商城

基于上面的项目，自己实现一个透明化的数据库代理端，在该代理端内实现分库分表操作： TinySharding。

只考虑 https://dev.mysql.com/doc/[MySQL 8.x^] 数据库即可。考察重点不是数据库，而是你的编码和设计能力。

=== 要求

. 将代码开源到 GitHub 上
. 将 TinySharding。 抽取出来，做成一个独立的小项目，可以在其他项目中复用。

=== 问题分析

实现一个透明化的数据库代理端，需要解决如下几个问题：

. 在应用层写的 SQL 语句，如何访问到对应的数据库和表？编译原理也许会告诉你答案。
. 在外部看来，该代理端就是一个 MySQL 数据库。怎么解析外部发来的请求？又如何把请求到的数据封装成外部熟悉的数据包？
. 怎么解决数据快速稳定传输的问题？这里就需要研究 TCP 等网络协议；也需要研究在 Java 中的网络编程相关问题。当然，即使其他编程语言也会有类似的问题。可以参考 https://en.wikipedia.org/wiki/C10k_problem[C10k problem - Wikipedia^]。



== 带秒杀功能的商城

自己设计并实现一个秒杀系统。

=== 要求

. 将代码开源到 GitHub 上。
. 能否将这个项目做得可复用？

=== 问题分析

秒杀系统的关键是如何解决突发的大流量访问的问题？